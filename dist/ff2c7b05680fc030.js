import*as THREE from"three";import{GLTFLoader}from"three/examples/jsm/loaders/GLTFLoader";import init from"./init";import"./style.css";const{sizes,camera,scene,canvas,controls,renderer}=init();camera.position.set(0,2,5);const floor=new THREE.Mesh(new THREE.PlaneGeometry(50,50),new THREE.MeshStandardMaterial({color:"#444444",metalness:0,roughness:.5}));floor.receiveShadow=!0,floor.rotation.x=.5*-Math.PI,scene.add(floor);const hemiLight=new THREE.HemisphereLight(16777215,16777215,.23);hemiLight.position.set(0,50,0),scene.add(hemiLight);const dirLight=new THREE.DirectionalLight(16777215,.54);dirLight.position.set(2,12,4),dirLight.castShadow=!0,dirLight.shadow.mapSize=new THREE.Vector2(1024,1024),scene.add(dirLight);const clickableObjects=[],loader=new GLTFLoader;loader.load("/models/Chasovnya/Chasovnya.gltf",(e=>{console.log(e),e.scene.scale.set(1,1,1),e.scene.position.set(-15,.4,15),clickableObjects.push(e.scene),scene.add(e.scene)})),loader.load("/models/LaboraK/LaboraK.gltf",(e=>{e.scene.scale.set(1,1,1),e.scene.position.set(-15,-.9,54),scene.add(e.scene)}));const tick=()=>{controls.update(),renderer.render(scene,camera),window.requestAnimationFrame(tick)};tick(),window.addEventListener("resize",(()=>{sizes.width=window.innerWidth,sizes.height=window.innerHeight,camera.aspect=sizes.width/sizes.height,camera.updateProjectionMatrix(),renderer.setSize(sizes.width,sizes.height),renderer.setPixelRatio(Math.min(window.devicePixelRatio,2)),renderer.render(scene,camera)})),window.addEventListener("dblclick",(()=>{document.fullscreenElement?document.exitFullscreen():canvas.requestFullscreen()}));var raycaster=new THREE.Raycaster,mouse=new THREE.Vector2;function onClick(e){mouse.x=e.clientX/window.innerWidth*2-1,mouse.y=-e.clientY/window.innerHeight*2+1,raycaster.setFromCamera(mouse,camera);var t=raycaster.intersectObjects(clickableObjects,!0);t.length>0&&(console.log("Объект был нажат:",t[0].object),window.open("https://www.npi-tu.ru","_blank"))}renderer.domElement.addEventListener("click",onClick);